@using NETLOG.Componentes
@model IEnumerable<SGR.Entidades.Entidades.Roda>

@{
    ViewBag.Title = "Cadastro Roda";
}

@(Html.KendoGrid<SGR.Entidades.Entidades.Roda>("rodaGrid")
                .ToolbarLimpar("gridAllFilterReset")
                .ToolbarExportarExcel("Roda/Exportar", "Roda.xls")
                .Columns(columns =>
                {
                    columns.Bound(p => p.IdRoda);
                    columns.Bound(p => p.Descricao).Width(140);                    
                    columns.Command(command => command.Destroy()).Width(110);
                })
               .DataSource(dataSource => dataSource
               .Ajax()
               //.Sort(sort => sort.Add(p => p.IdSituacaoRoda).Ascending())
               .Events(events => events.Error("errorHandler"))
               .Model(model =>
               {
                   model.Id(p => p.IdRoda);
                   model.Field(p => p.Descricao).Editable(false);
               })
                    .Create(update => update.Action("Inserir", "TipoAcidente"))
                    .Read(read => read.Action("Ler", "TipoAcidente"))
                    .Update(update => update.Action("Atualizar", "TipoAcidente"))
                    .Destroy(update => update.Action("Apagar", "TipoAcidente"))
               )
)

<script type="text/javascript">
    function error_handler(e) {
        if (e.errors) {
            var message = "Errors:\n";
            $.each(e.errors, function (key, value) {
                if ('errors' in value) {
                    $.each(value.errors, function () {
                        message += this + "\n";
                    });
                }
            });
            alert(message);
        }
    }
</script>
